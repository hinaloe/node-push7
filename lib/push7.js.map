{"version":3,"sources":["../src/push7.js"],"names":[],"mappings":";;;;;;;;;;;AAAA;;;;;;;;AAEA,IAAM,cAAc,QAAQ,iBAAR,CAApB;;IAEO,O,GAAW,W,CAAX,O;;;;;;IAKM,K,WAAA,K;;;;;;;AAMT,yBAMG;AAAA,6BALC,IAKD;AAAA,YALC,IAKD,6BALM,cAKN;AAAA,YAJC,KAID,QAJC,KAID;AAAA,YAHC,MAGD,QAHC,MAGD;AAAA,iCAFC,QAED;AAAA,YAFC,QAED,iCAFU,uCAEV;AAAA,kCADC,SACD;AAAA,YADC,SACD,kCADW,uBAAuB,OAClC;;AAAA;;;AAEC,aAAK,IAAL,GAAY,IAAZ;;AAEA,aAAK,KAAL,GAAa,KAAb;;AAEA,aAAK,MAAL,GAAc,MAAd;;AAEA,aAAK,QAAL,GAAgB,QAAhB;;;;;;AAMA,aAAK,OAAL,GAAe;AACX,0BAAc;AADH,SAAf;AAGH;;;;;;;;;;;+BAQgB;AAAA,gBAAZ,KAAY,yDAAJ,EAAI;;AACb,mBAAO,MAAM,GAAN,CAAU,KAAK,MAAL,CAAY,MAAZ,CAAV,EAA+B,KAA/B,CAAP;AACH;;;;;;;;;;oCAeE;AAAA,gBANC,KAMD,SANC,KAMD;AAAA,gBALC,IAKD,SALC,IAKD;AAAA,gBAJC,IAID,SAJC,IAID;AAAA,gBAHC,GAGD,SAHC,GAGD;AAAA,gBAFC,MAED,SAFC,MAED;AAAA,oCADC,KACD;AAAA,gBADC,KACD,+BADS,EACT;;AACC,oBAAQ,SAAc;AAClB,uBAAO,KADW;AAElB,sBAAM,IAFY;AAGlB,sBAAM,IAHY;AAIlB,qBAAK,GAJa;AAKlB,wBAAQ,WAAW,SAAX,GAAuB,KAAK,MAA5B,GAAqC;AAL3B,aAAd,EAML,KANK,CAAR;AAOA,mBAAO,MAAM,IAAN,CAAW,KAAK,MAAL,CAAY,MAAZ,CAAX,EAAgC,KAAhC,CAAP;AAGH;;;;;;;;;;;;;;;;;;+BAwCM,Q,EAAU;AACb,mBAAO,KAAK,QAAL,CAAc,OAAd,CAAsB,OAAtB,EAA+B,KAAK,IAApC,EAA0C,OAA1C,CAAkD,QAAlD,EAA4D,KAAK,KAAjE,EAAwE,OAAxE,CAAgF,WAAhF,EAA6F,QAA7F,CAAP;AACH;;;4BAjCU,G,EAAK,K,EAAO;AACnB,mBAAO,8BAAQ;AACX,oBAAI,KADO;AAEX,qBAAK,GAFM;AAGX,yBAAS,KAAK,OAHH;AAIX,sBAAM;AAJK,aAAR,CAAP;AAMH;;;;;;;;;;;6BAQW,G,EAAK,K,EAAO;AACpB,mBAAO,8BAAQ;AACX,wBAAQ,MADG;AAEX,qBAAK,GAFM;AAGX,sBAAM,KAHK;AAIX,yBAAS,KAAK,OAJH;AAKX,sBAAM;AALK,aAAR,CAAP;AAOH","file":"push7.js","sourcesContent":["import Request from \"request-promise\"\n\nconst packagejson = require('../package.json');\n\nconst {version} = packagejson;\n\n/**\n * Push7 API Client\n */\nexport class Push7 {\n\n    /**\n     *\n     * @param {{host:string, appno:string, apikey:string, endpoint:string, useragent: string}} param\n     */\n    constructor({\n        host='api.push7.jp',\n        appno,\n        apikey,\n        endpoint='https://:host/api/v1/:appno/:endpoint',\n        useragent='Node-Push7 Client/' + version,\n    }) {\n        /** @type {string} API Host */\n        this.host = host;\n        /** @type {string} Push7 AppNo */\n        this.appno = appno;\n        /** @type {string} Push7 AppKey */\n        this.apikey = apikey;\n        /** @type {string} API Endpoint */\n        this.endpoint = endpoint;\n        /**\n         *\n         * @type {object} request Header\n         * @property {string} User-Agent User Agent\n         */\n        this.headers = {\n            'User-Agent': useragent\n        };\n    }\n\n\n    /**\n     * Get App Info\n     * @param {object} param\n     * @returns {Promise} request\n     */\n    head(param = {}) {\n        return Push7.get(this.reqUrl('head'), param);\n    }\n\n\n    /**\n     * Send Push Notification\n     * @param {{title:string, body:string, icon:string, url:string, apikey:string, param:object}} param\n     * @return {Promise} request\n     */\n    send({\n        title,\n        body,\n        icon,\n        url,\n        apikey,\n        param = {},\n    }) {\n        param = Object.assign({\n            title: title,\n            body: body,\n            icon: icon,\n            url: url,\n            apikey: apikey === undefined ? this.apikey : apikey\n        }, param);\n        return Push7.post(this.reqUrl('send'), param);\n\n\n    }\n\n\n    /**\n     *\n     * @param {string} url\n     * @param {object} param\n     * @return {Promise} request\n     */\n    static get(url, param) {\n        return Request({\n            qs: param,\n            uri: url,\n            headers: this.headers,\n            json: true\n        })\n    }\n\n    /**\n     *\n     * @param {string} url\n     * @param {object} param\n     * @return {Promise} request\n     */\n    static post(url, param) {\n        return Request({\n            method: 'POST',\n            uri: url,\n            body: param,\n            headers: this.headers,\n            json: true\n        })\n    }\n\n\n    /**\n     *\n     * @param {string} endpoint\n     * @return {string} full url\n     */\n    reqUrl(endpoint) {\n        return this.endpoint.replace(':host', this.host).replace(':appno', this.appno).replace(':endpoint', endpoint);\n    }\n\n}"]}